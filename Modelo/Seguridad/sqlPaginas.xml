<root>
    <LISTAR_REPORTE_PAGINAS>
        <sql>
            SELECT
            CONFIGURACIONES.PAGINAS.PAG_ID AS ID,
            CASE WHEN MEN.MEN_ID IS NULL THEN SUB.MEN_ID ELSE MEN.MEN_ID END AS IDMENU,
	    COALESCE(CASE WHEN MEN.MEN_ID IS NULL THEN NULL ELSE  SUB.MEN_ID END,'')  AS IDSUB_MENU,
            CASE WHEN MEN.MEN_NOMBRE IS NULL THEN SUB.MEN_NOMBRE ELSE MEN.MEN_NOMBRE END AS MENU,
            COALESCE(CASE WHEN MEN.MEN_NOMBRE IS NULL THEN NULL ELSE  SUB.MEN_NOMBRE END,'')  AS SUB_MENU,
            CONFIGURACIONES.PAGINAS.SOF_NOMBRE AS PAGINA,
            CONFIGURACIONES.PAGINAS.SOF_ICONO AS ICONO,
            CONFIGURACIONES.PAGINAS.SOF_URL AS URL,
            CONFIGURACIONES.PAGINAS.SOF_ESTADO AS ESTADO
            FROM  CONFIGURACIONES.PAGINAS 
            INNER JOIN CONFIGURACIONES.MENU SUB  ON SUB.MEN_ID = PAGINAS.MEN_ID 
            LEFT JOIN CONFIGURACIONES.MENU MEN   ON MEN.MEN_ID =  SUB.MEN_PADRE
            ORDER BY 1 ,2
        </sql>
    </LISTAR_REPORTE_PAGINAS> 
    <REGISTRAR_PAGINA_MENU>
        <sql>
            INSERT INTO CONFIGURACIONES.PAGINAS (PAGINAS.MEN_ID,PAGINAS.SOF_NOMBRE,PAGINAS.SOF_ICONO,PAGINAS.SOF_URL,PAGINAS.SOF_ESTADO)VALUES(?,?,?,?,?);
        </sql>
    </REGISTRAR_PAGINA_MENU>
    <ACTUALIZAR_PAGINAS>
        <sql>
            UPDATE CONFIGURACIONES.PAGINAS SET PAGINAS.MEN_ID = ?,PAGINAS.SOF_NOMBRE = ?,PAGINAS.SOF_ICONO = ?,PAGINAS.SOF_URL = ?,PAGINAS.SOF_ESTADO = ? WHERE PAG_ID = ? ; 
        </sql>
    </ACTUALIZAR_PAGINAS>
    <ELIMINAR_PAGINAS_PP>
        <sql>
            DELETE FROM CONFIGURACIONES.PAGINAS WHERE PAG_ID = ? ;
        </sql>
    </ELIMINAR_PAGINAS_PP>
    <REGISTRAR_MENU>
        <sql>
           INSERT INTO CONFIGURACIONES.MENU (MENU.MEN_NOMBRE,MENU.MEN_ESTADO,MENU.MEN_PADRE,MENU.TIP_MENU) VALUE(?,?,?,?)
        </sql>
    </REGISTRAR_MENU>
    <VISUALIZAR_MENU_PADRES>
        <sql>
            SELECT MEN_ID AS ID_MENU,MEN_NOMBRE AS NOMBRE_MENU, COALESCE(MEN_PADRE,'0') AS MENU_PADRE,MENU.TIP_MENU AS TIPO,CASE WHEN MEN_ESTADO = 'A' THEN 'ACTIVO' WHEN MEN_ESTADO ='I' THEN 'INACTIVO' END AS ESTADO FROM MENU  ORDER BY 1 ASC;
        </sql>
    </VISUALIZAR_MENU_PADRES>
    <VISUALIZAR_TIPO_MENU>
        <sql>
            SELECT TIPO_MENU.TIP_ID,TIPO_MENU.TIP_NOMBRE,TIPO_MENU.TIP_ESTADO FROM TIPO_MENU WHERE TIP_ESTADO ='A'
        </sql>
    </VISUALIZAR_TIPO_MENU>
    <ACTUALIZAR_MENU>
        <sql>
            UPDATE CONFIGURACIONES.MENU SET MEN_NOMBRE = ?,MEN_ESTADO = ?,MEN_PADRE = ?,TIP_MENU = ? WHERE MEN_ID = ?;
        </sql>
    </ACTUALIZAR_MENU>
    <CONSULTAR_MENU_PAGINA>
        <sql>
            SELECT PAG_ID AS PAG_ID FROM CONFIGURACIONES.PAGINAS WHERE MEN_ID = ?;
        </sql>
    </CONSULTAR_MENU_PAGINA>
    <ELIMINAR_MENU>
        <sql>
            DELETE FROM CONFIGURACIONES.MENU WHERE MEN_ID = ? ;
        </sql>
    </ELIMINAR_MENU>
</root>
