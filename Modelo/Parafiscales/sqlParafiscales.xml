<root>
    <CONSULTAR_CUENTA_CONTABLE>
        <sql>
            SELECT
            CT.CODIGO AS CUENTA,
            CT.DENOMINACION AS NOMBRE,
            CT.ID AS ID_CUENTA
            FROM
            CUENTA CT
            WHERE CT.CODIGO REGEXP ? OR CT.DENOMINACION REGEXP ?
        </sql>
    </CONSULTAR_CUENTA_CONTABLE>
    <LISTAR_TIPO_FONDOS>
        <sql>
            SELECT
            TPF_ID AS ID,
            TPF_DESCRIPCION AS DESCRIPCION 
            FROM
            TIPO_DE_FONDO 
            WHERE
            TPF_ESTADO = 'A'
        </sql>
    </LISTAR_TIPO_FONDOS>
    <CONSULTAR_CODIGO_PARAFISCALES>
        <sql>
            SELECT
            PARAF_NOMBRE AS DESCRIPCION,
            PARAF_CODIGO AS CODIGO
            FROM
            PARAFISCALES
            WHERE PARAF_NOMBRE = ? OR PARAF_CODIGO = ?
        </sql>
    </CONSULTAR_CODIGO_PARAFISCALES>
    <REGISTRAR_PARAFISCAL>
        <sql>
            INSERT INTO PARAFISCALES (PARAF_CODIGO,PARAF_NOMBRE,TPF_ID,PARAF_ESTADO)VALUES(?,?,?,?);
        </sql>
    </REGISTRAR_PARAFISCAL>
    <REGISTRAR_PARAFISCAL_DETALLE>
        <sql>
            INSERT INTO PARAFISCALES_DETALLE (
            PARAF_ID,
            PORC_SUBMAN,
            DOCUMENTO_SUBFAM,
            CODADMIN_SUBFAM,
            PORC_ICBF,
            DOCUMENTO_ICBF,
            CODADMIN_ICBF,
            PORC_SENA,
            DOCUMENTO_SENA,
            CODADMIN_SENA)
            VALUES(?,?,?,?,?,?,?,?,?,?)
        </sql>
    </REGISTRAR_PARAFISCAL_DETALLE>
    <LISTAR_APORTE_PARAF>
        <sql>
            SELECT
            PF.PARAF_ID AS PARAF_ID,
            PF.PARAF_CODIGO AS PARAF_CODIGO,
            PF.PARAF_NOMBRE AS PARAF_NOMBRE,
            PFD.PORC_SUBMAN AS PORC_SUBMAN,
            PFD.PORC_ICBF AS PORC_ICBF,
            PFD.PORC_SENA AS PORC_SENA,
            PFD.DOCUMENTO_SUBFAM AS NITSUBFAM,
            PFD.DOCUMENTO_ICBF AS NITICBF,
            PFD.DOCUMENTO_SENA AS NITSENA,
            PFD.CODADMIN_SUBFAM AS CODADMIN_SUBFAM,
            PFD.CODADMIN_ICBF AS CODADMIN_ICBF,
            PFD.CODADMIN_SENA AS CODADMIN_SENA,
            PFD.AUXCONTABLE_SUBFAM AS CONT_SUBFAM_ID,
            /*CT.CODIGO AS CONT_SUBFAM,*/
            PFD.AUXFISCAL_SUBFAM AS FISC_SUBFAM_ID,
            /*CTD.CODIGO AS FISC_SUBFAM,*/
            PFD.AUXNORMAS_SUBFAM AS NORMAS_SUBFAM_ID,
            /*CTT.CODIGO AS NORMAS_SUBFAM,*/
            PFD.AUXCONTABLE_ICBF AS CONT_ICBF_ID,
            /*CTC.CODIGO AS CONT_ICBF,*/
            PFD.AUXFISCAL_ICBF AS FISC_ICBF_ID,
            /*CTS.CODIGO AS FISC_ICBF,*/
            PFD.AUXNORMAS_ICBF AS NORMAS_ICBF_ID,
            /*CTO.CODIGO AS NORMAS_ICBF,*/
            PFD.AUXCONTABLE_SENA AS CONT_SENA_ID,
            /*CTN.CODIGO AS CONT_SENA,*/
            PFD.AUXFISCAL_SENA AS FISC_SENA_ID,
            /*CTNN.CODIGO AS FISC_SENA,*/
            PFD.AUXNORMAS_SENA AS NORMAS_SENA_ID,
            /*CTTT.CODIGO AS NORMAS_SENA,*/
            PF.TPF_ID AS TIPO_FONDO,
            CASE
            WHEN PF.PARAF_ESTADO = "A" THEN
            "ACTIVO" 
            WHEN PF.PARAF_ESTADO = "I" THEN
            "INACTIVO" 
            END AS ESTADO,
            PF.PARAF_ESTADO AS ESTADO_ID 
            FROM
            PARAFISCALES PF
            INNER JOIN PARAFISCALES_DETALLE PFD ON PFD.PARAF_ID = PF.PARAF_ID
            /*LEFT JOIN BDCONTABLE.CUENTA CT ON CT.ID = PFD.AUXCONTABLE_SUBFAM
            LEFT JOIN BDCONTABLE.CUENTA CTD ON CTD.ID = PFD.AUXFISCAL_SUBFAM
            LEFT JOIN BDCONTABLE.CUENTA CTT ON CTT.ID = PFD.AUXNORMAS_SUBFAM
            LEFT JOIN BDCONTABLE.CUENTA CTC ON CTC.ID = PFD.AUXCONTABLE_ICBF
            LEFT JOIN BDCONTABLE.CUENTA CTS ON CTS.ID = PFD.AUXFISCAL_ICBF
            LEFT JOIN BDCONTABLE.CUENTA CTO ON CTO.ID = PFD.AUXNORMAS_ICBF
            LEFT JOIN BDCONTABLE.CUENTA CTN ON CTN.ID = PFD.AUXCONTABLE_SENA
            LEFT JOIN BDCONTABLE.CUENTA CTNN ON CTNN.ID = PFD.AUXFISCAL_SENA
            LEFT JOIN BDCONTABLE.CUENTA CTTT ON CTTT.ID = PFD.AUXNORMAS_SENA*/
            WHERE
            PF.PARAF_ESTADO = "A"
        </sql>
    </LISTAR_APORTE_PARAF>
    <ACTUALIZAR_PARAFISCALES>
        <sql>
            UPDATE PARAFISCALES 
            SET PARAF_CODIGO =?,
            PARAF_NOMBRE =?,
            TPF_ID = ?,
            PARAF_ESTADO = ?
            WHERE
            PARAF_ID = ?
        </sql>
    </ACTUALIZAR_PARAFISCALES>
    <ACTUALIZAR_PARAFISCALES_DETALLE>
        <sql>
            UPDATE PARAFISCALES_DETALLE 
            SET PORC_SUBMAN = ?,
            DOCUMENTO_SUBFAM = ?,
            CODADMIN_SUBFAM = ?,
            PORC_ICBF = ?,
            DOCUMENTO_ICBF = ?,
            CODADMIN_ICBF = ?,
            PORC_SENA = ?,
            DOCUMENTO_SENA = ?,
            CODADMIN_SENA = ?
            WHERE
            PARAF_ID = ?
        </sql>
    </ACTUALIZAR_PARAFISCALES_DETALLE>
    <ELIMINAR_PARAFISCAL_DETALLE>
        <sql>
            DELETE FROM PARAFISCALES_DETALLE WHERE PARAF_ID = ?;
        </sql>
    </ELIMINAR_PARAFISCAL_DETALLE>
    <ELIMINAR_PARAFISCAL>
        <sql>
            DELETE FROM PARAFISCALES WHERE PARAF_ID = ?;
        </sql>
    </ELIMINAR_PARAFISCAL>
</root>